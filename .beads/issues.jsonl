<<<<<<< Updated upstream
{"id":"hq-80r","title":"DEBUG: Verify client-\u003etransport is set","description":"Check if client-\u003etransport pointer is NULL when frame transmission code runs. Add log before and after transport checks. Verify transport is initialized in WebSocket client connection.","status":"open","priority":2,"issue_type":"task","owner":"me@zfo.gg","created_at":"2026-02-21T17:12:09Z","created_by":"mayor","updated_at":"2026-02-21T17:12:09Z"}
{"id":"hq-pdx","title":"DEBUG: Verify acip_send_ascii_frame return value","description":"Check what error code is returned by acip_send_ascii_frame(). If ASCIICHAT_OK, frame should be queued. If error, log shows which error. Run test and report.","status":"open","priority":2,"issue_type":"task","owner":"me@zfo.gg","created_at":"2026-02-21T17:12:09Z","created_by":"mayor","updated_at":"2026-02-21T17:12:09Z"}
{"id":"hq-smt","title":"DEBUG: Frame transmission not firing - render.c","description":"Frame transmission code added but not executing. Add debug logs at line 569 (before acip_send_ascii_frame) and line 586 (check client-\u003etransport NULL). Build: cmake --build build. Test: bash scripts/test-websocket-server-client.sh. Search: grep FRAME_SEND logs. Report findings.","status":"open","priority":2,"issue_type":"task","owner":"me@zfo.gg","created_at":"2026-02-21T17:12:03Z","created_by":"mayor","updated_at":"2026-02-21T17:12:03Z"}
=======
{"id":"ascii-chat-sdo","title":"Re-investigate and fix WebSocket frame delivery (Issue #305)","description":"Issue #305 was closed by PR #342 claiming to fix WebSocket fps issues, but testing proves it was NEVER fixed.\n\n## CRITICAL FINDINGS\n\n**Current Status (master - 9b88ded0):**\n- WebSocket client send queue fills immediately\n- Packets cannot be sent\n- Protocol initialization fails\n\n**At commit 6ac71527 (PR #342 merge claim):**\n- Client CRASHES with SIGABRT from libwebsockets (rops_handle_POLLIN_ws assertion)\n- AddressSanitizer: Heap-use-after-free in transport cleanup\n- No ASCII art rendered - 0fps video\n\n## Why It Was Closed Falsely\nPR #342 claims to fix three issues:\n1. WRITEABLE callbacks on all protocols\n2. Race condition in client transport\n3. Complete WebSocket client frame handling\n\nBut test-websocket-server-client.sh proves NONE of these work:\n- send queue still fills up\n- client crashes during send\n- no frames delivered\n\n## Evidence\n1. /tmp/ascii-chat-client-stdout-*.txt: Client crashes with AddressSanitizer\n2. /tmp/ascii-chat-client-*.log: 'WebSocket client send queue FULL - cannot queue 182 byte message'\n3. notes/BUG_REPORT_FRAME_LOSS.md: Multiple documented bugs (lws_service timeout, fragment reassembly)\n4. notes/BUG_REPORT_FRAME_LOSS.extra.md: Fragment reassembly state not preserved across recv() calls\n\n## Root Causes (from code analysis)\n1. libwebsockets WRITEABLE callbacks not firing for browser clients\n2. Fragment reassembly state destroyed on timeout instead of persisted\n3. Send queue bounded with no backpressure handling\n4. Thread synchronization issues (race conditions)\n\n## Next Steps\n1. Debug WRITEABLE callback triggering\n2. Implement persistent fragment reassembly state\n3. Investigate send queue design vs libwebsockets expectations\n4. Add proper WebSocket integration tests with actual frame validation\n\n## Related Issues\n- GitHub Issue #305: server websocket fps bug\n- GitHub PR #342: claimed fix (not actually merged correctly)\n","status":"in_progress","priority":0,"issue_type":"bug","owner":"me@zfo.gg","created_at":"2026-02-21T15:51:29Z","created_by":"Zachary Fogg","updated_at":"2026-02-21T15:52:35Z"}
>>>>>>> Stashed changes
