# Coturn STUN/TURN server configuration for ascii-chat
# Documentation: https://github.com/coturn/coturn/wiki/turnserver

# =============================================================================
# Listener Configuration
# =============================================================================

# STUN/TURN listening port (default: 3478)
listening-port=3478

# STUN/TURN over TLS listening port (default: 5349)
# Uncomment when you have SSL certificates configured
# tls-listening-port=5349

# Listener IP addresses
# External IP will be auto-detected with DETECT_EXTERNAL_IP=yes
# listening-ip=0.0.0.0

# =============================================================================
# External/Relay IP Configuration
# =============================================================================

# Auto-detect external IP (set via docker environment)
# external-ip will be detected automatically

# Relay IP for TURN
# relay-ip=0.0.0.0

# =============================================================================
# Relay Ports Configuration
# =============================================================================

# Relay port range for TURN sessions
# These ports must be open in your firewall
min-port=49152
max-port=65535

# =============================================================================
# Authentication & Security
# =============================================================================

# Realm for TURN authentication
realm=ascii-chat.com

# Use fingerprints in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Static user credentials
# Format: username:password
# CHANGE THESE IN PRODUCTION!
user=ascii:changeme123
user=webrtc:changeme456

# For production, consider using a PostgreSQL/MySQL database:
# psql-userdb="host=localhost dbname=coturn user=coturn password=secret"
# Or REST API authentication:
# use-auth-secret
# static-auth-secret=your-secret-key-here

# =============================================================================
# Security Options
# =============================================================================

# Disable telnet CLI (security)
no-cli

# Disable loopback peers (prevent relay to localhost)
no-loopback-peers

# Disable multicast peers (prevent relay to multicast)
no-multicast-peers

# Enable secure mode (only encrypted connections for long-term credentials)
# stale-nonce=600

# =============================================================================
# Protocol Support
# =============================================================================

# Support both UDP and TCP for TURN
# (enabled by default)

# =============================================================================
# Logging
# =============================================================================

# Log level: 0=no logs, 1=error, 2=warning, 3=info, 4=debug
verbose

# Log file location (container volume)
log-file=/var/log/coturn.log

# Moderate verbosity (log auth successes/failures)
# simple-log

# =============================================================================
# Performance Tuning
# =============================================================================

# Maximum number of TURN sessions
max-bps=0

# Total allocation quota (0 = unlimited)
total-quota=0

# Per-user allocation quota (0 = unlimited)
user-quota=0

# =============================================================================
# TLS/DTLS Configuration (Optional - Uncomment when ready)
# =============================================================================

# SSL/TLS certificate paths
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/pkey.pem

# Cipher suite (use strong ciphers)
# cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384"

# DH parameters for TLS (generate with: openssl dhparam -out dhparams.pem 2048)
# dh-file=/etc/coturn/dhparams.pem

# =============================================================================
# Misc
# =============================================================================

# Server name (for informational purposes)
server-name=ascii-chat-coturn

# Disable UDP (uncomment to force TCP only)
# no-udp

# Disable TCP (uncomment to force UDP only)
# no-tcp

# Enable STUN only mode (no TURN relay)
# stun-only
