# =============================================================================
# Status Messages Module
# =============================================================================
# This module prints the final configuration status and build commands
#
# Prerequisites:
#   - All configuration complete
#   - Color variables set (from BuildConfiguration.cmake)
#   - Platform detection complete
#   - All dependencies found
#
# Outputs:
#   - Final status messages printed to console
# =============================================================================

# Status Messages (matching Makefile help output)
message(STATUS "")
message(STATUS "========================================")
message(STATUS "ASCII-Chat Configuration:")
message(STATUS "========================================")
message(STATUS "  Build type:        ${CMAKE_BUILD_TYPE}")
message(STATUS "  C Standard:        C${CMAKE_C_STANDARD}")
message(STATUS "  C Compiler:        ${CMAKE_C_COMPILER}")
if(CMAKE_C_COMPILER_LAUNCHER)
    message(STATUS "  Compiler Launcher: ${CMAKE_C_COMPILER_LAUNCHER}")
endif()
message(STATUS "  Compiler ID:       ${CMAKE_C_COMPILER_ID} ${CMAKE_C_COMPILER_VERSION}")
message(STATUS "  Archiver:          ${CMAKE_AR}")
message(STATUS "  Ranlib:            ${CMAKE_RANLIB}")
message(STATUS "  Platform:          ${CMAKE_SYSTEM_NAME}")
message(STATUS "  Processor:         ${CMAKE_SYSTEM_PROCESSOR}")
message(STATUS "  CPU Cores:         ${CPU_CORES}")

# Determine build tool information
message(STATUS "  Build Tool:        ${CMAKE_GENERATOR}")
if(CMAKE_GENERATOR STREQUAL "Ninja")
    message(STATUS "  Build Binary:      ninja")
elseif(CMAKE_GENERATOR MATCHES "Unix Makefiles")
    if(CMAKE_MAKE_PROGRAM)
        get_filename_component(MAKE_BINARY "${CMAKE_MAKE_PROGRAM}" NAME)
        message(STATUS "  Build Binary:      ${MAKE_BINARY}")
    else()
        message(STATUS "  Build Binary:      make")
    endif()
elseif(CMAKE_GENERATOR MATCHES "Visual Studio")
    message(STATUS "  Build Binary:      msbuild")
elseif(CMAKE_GENERATOR MATCHES "Xcode")
    message(STATUS "  Build Binary:      xcodebuild")
else()
    message(STATUS "  Build Binary:      ${CMAKE_GENERATOR}")
endif()
if(WIN32)
    if(WINDOWS_SDK_VERSION)
        message(STATUS "  Windows SDK:       ${WINDOWS_SDK_VERSION}")
    endif()
    if(PLATFORM_WINDOWS_ARM64)
        message(STATUS "  Architecture:      ARM64")
    elseif(PLATFORM_WINDOWS_ARM)
        message(STATUS "  Architecture:      ARM")
    else()
        message(STATUS "  Architecture:      x64")
    endif()
elseif(PLATFORM_DARWIN)
    message(STATUS "  Apple Silicon:     ${IS_APPLE_SILICON}")
    message(STATUS "  Rosetta:           ${IS_ROSETTA}")
endif()

# Display environment configuration if set
if(DEFINED ENV{CC} OR DEFINED ENV{CFLAGS} OR DEFINED ENV{CPPFLAGS} OR DEFINED ENV{LDFLAGS})
    message(STATUS "")
    message(STATUS "Environment Configuration:")
    if(DEFINED ENV{CC})
        message(STATUS "  CC:                $ENV{CC}")
    endif()
    if(DEFINED ENV{CFLAGS})
        message(STATUS "  CFLAGS:            $ENV{CFLAGS}")
    endif()
    if(DEFINED ENV{CPPFLAGS})
        message(STATUS "  CPPFLAGS:          $ENV{CPPFLAGS}")
    endif()
    if(DEFINED ENV{LDFLAGS})
        message(STATUS "  LDFLAGS:           $ENV{LDFLAGS}")
    endif()
endif()

message(STATUS "")
message(STATUS "Hardware Acceleration:")
message(STATUS "  SIMD Mode:         ${SIMD_MODE}")
if(ENABLE_SIMD_SSE2)
    message(STATUS "  SSE2:              ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  SSE2:              ${Red}Disabled${ColorReset}")
endif()
if(ENABLE_SIMD_SSSE3)
    message(STATUS "  SSSE3:             ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  SSSE3:             ${Red}Disabled${ColorReset}")
endif()
if(ENABLE_SIMD_AVX2)
    message(STATUS "  AVX2:              ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  AVX2:              ${Red}Disabled${ColorReset}")
endif()
if(ENABLE_SIMD_NEON)
    message(STATUS "  NEON:              ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  NEON:              ${Red}Disabled${ColorReset}")
endif()
if(ENABLE_SIMD_SVE)
    message(STATUS "  SVE:               ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  SVE:               ${Red}Disabled${ColorReset}")
endif()
if(ENABLE_CRC32_HW)
    message(STATUS "  CRC32 HW:          ${Green}Enabled${ColorReset}")
else()
    message(STATUS "  CRC32 HW:          ${Red}Disabled${ColorReset}")
endif()
message(STATUS "")
message(STATUS "Dependencies:")
if(CRITERION_FOUND)
    message(STATUS "  Tests:             ${Green}Found${ColorReset}")
else()
    message(STATUS "  Tests:             ${Red}Not Found${ColorReset}")
endif()
if(ZSTD_FOUND)
    message(STATUS "  zstd:              ${Green}Found${ColorReset}")
else()
    message(STATUS "  zstd:              ${Red}Not Found${ColorReset}")
endif()
if(LIBSODIUM_FOUND)
    message(STATUS "  libsodium:         ${Green}Found${ColorReset}")
else()
    message(STATUS "  libsodium:         ${Red}Not Found${ColorReset}")
endif()
if(BEARSSL_FOUND)
    message(STATUS "  BearSSL:           ${Green}Found${ColorReset}")
else()
    message(STATUS "  BearSSL:           ${Red}Not Found${ColorReset}")
endif()
if(PORTAUDIO_FOUND)
    message(STATUS "  PortAudio:         ${Green}Found${ColorReset}")
else()
    message(STATUS "  PortAudio:         ${Red}Not Found${ColorReset}")
endif()
message(STATUS "")
message(STATUS "Build Commands:")
message(STATUS "  Configure Debug:     cmake -B build -DCMAKE_BUILD_TYPE=Debug     # With sanitizers (default)")
message(STATUS "  Configure Dev:       cmake -B build -DCMAKE_BUILD_TYPE=Dev       # Debug without sanitizers (faster)")
message(STATUS "  Configure Release:   cmake -B build -DCMAKE_BUILD_TYPE=Release")
message(STATUS "  Configure Coverage:  cmake -B build -DCMAKE_BUILD_TYPE=Coverage")
message(STATUS "  Build:               cmake --build build")
message(STATUS "  Run:                 ./build/bin/ascii-chat [--help|--version] [client|server] [options...]")
if(CRITERION_FOUND)
    message(STATUS "  Run tests:           ./tests/scripts/run_tests.sh")
    message(STATUS "  Run tests (CMake):   cmake --build build --target test_all")
endif()
message(STATUS "  Format code:         cmake --build build --target format")
message(STATUS "  Check formatting:    cmake --build build --target format-check")
if(WIN32)
    message(STATUS "  Install deps:        ./scripts/deps.ps1")
else()
    message(STATUS "  Install deps:        ./scripts/deps.sh")
endif()
message(STATUS "========================================")
message(STATUS "")

